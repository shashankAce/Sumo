{"version":3,"sources":["file:///Users/shashankchaurasia/CocosWorkspace/Sumo/assets/Script/GameUIController.ts"],"names":["_decorator","Component","Node","macro","UITransform","Vec3","EventHandler","ccclass","property","GameUIController","type","tooltip","start","node","on","EventType","TOUCH_MOVE","touchMove","TOUCH_START","touchStart","TOUCH_END","touchEnded","touch","loc","getUILocation","pos","getComponent","convertToNodeSpaceAR","x","y","angle","Math","atan2","touchEventCallBack","forEach","c","emit","DEG"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAwBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Y,OAAAA,Y;;;;;;;AAC1EC,MAAAA,O,GAAsBP,U,CAAtBO,O;AAASC,MAAAA,Q,GAAaR,U,CAAbQ,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;kCAGaC,gB,WADZF,OAAO,CAAC,kBAAD,C,UAKHC,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAE,CAACJ,YAAD,CADA;AAENK,QAAAA,OAAO,EAAE;AAFH,OAAD,C;;;;;;;;;;;;;;;;;;;;;eAMTC,K,GAAA,iBAAQ;AACJ,eAAKC,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeC,UAA5B,EAAwC,KAAKC,SAA7C,EAAwD,IAAxD;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeG,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAaZ,IAAI,CAACa,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,UAA5C,EAAwD,IAAxD;AACH,S;;eAEDJ,S,GAAA,mBAAUK,KAAV,EAA6B;AACzB,cAAIC,GAAG,GAAGD,KAAK,CAACE,aAAN,EAAV;AACA,cAAIC,GAAG,GAAG,KAAKZ,IAAL,CAAUa,YAAV,CAAuBtB,WAAvB,EAAoCuB,oBAApC,CAAyD,IAAItB,IAAJ,CAASkB,GAAG,CAACK,CAAb,EAAgBL,GAAG,CAACM,CAApB,CAAzD,CAAV;AAEA,cAAIC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACI,CAAf,EAAkBJ,GAAG,CAACG,CAAtB,CAAZ;AACA,eAAKK,kBAAL,CAAwBC,OAAxB,CAAgC,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACC,IAAF,CAAO,CAACX,GAAD,EAAMK,KAAK,GAAG3B,KAAK,CAACkC,GAApB,CAAP,CAAJ;AAAA,WAAjC;AACH,S;;eAEDhB,U,GAAA,oBAAWC,KAAX,EAA8B;AAC1B,eAAKW,kBAAL,CAAwBC,OAAxB,CAAgC,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACC,IAAF,CAAO,CAAC,IAAI/B,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAD,CAAP,CAAJ;AAAA,WAAjC;AACH,S;;eAEDc,U,GAAA,oBAAWG,KAAX,EAA8B;AAC1B,eAAKL,SAAL,CAAeK,KAAf;AACH,S;;;QA9BiCrB,S;;;;;iBAQG,E","sourcesContent":["\r\nimport { _decorator, Component, Node, Vec2, EventTouch, macro, UITransform, Vec3, EventHandler } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = GameUIController\r\n * DateTime = Tue Sep 28 2021 19:04:24 GMT+0530 (India Standard Time)\r\n * Author = shashankA\r\n * FileBasename = GameUIController.ts\r\n * FileBasenameNoExtension = GameUIController\r\n * URL = db://assets/Script/GameUIController.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('GameUIController')\r\nexport class GameUIController extends Component {\r\n\r\n    startLoc: Vec2;\r\n\r\n    @property({\r\n        type: [EventHandler],\r\n        tooltip: 'Touch Drag'\r\n    })\r\n    touchEventCallBack: EventHandler[] = [];\r\n\r\n    start() {\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.touchEnded, this);\r\n    }\r\n\r\n    touchMove(touch: EventTouch) {\r\n        let loc = touch.getUILocation();\r\n        let pos = this.node.getComponent(UITransform).convertToNodeSpaceAR(new Vec3(loc.x, loc.y));\r\n\r\n        let angle = Math.atan2(pos.y, pos.x);\r\n        this.touchEventCallBack.forEach(c => c.emit([pos, angle * macro.DEG]));\r\n    }\r\n\r\n    touchEnded(touch: EventTouch) {\r\n        this.touchEventCallBack.forEach(c => c.emit([new Vec3(0, 0, 0)]));\r\n    }\r\n\r\n    touchStart(touch: EventTouch) {\r\n        this.touchMove(touch);\r\n    }\r\n\r\n}"]}