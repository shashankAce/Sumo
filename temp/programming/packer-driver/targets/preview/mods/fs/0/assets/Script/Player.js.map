{"version":3,"sources":["file:///Users/shashankchaurasia/CocosWorkspace/Sumo/assets/Script/Player.ts"],"names":["_decorator","Component","Vec3","Node","macro","ccclass","property","CELL_TIME","SPEED","Player","type","ZERO","touchCallBack","vector","angle","rotateZ","playerCamera","eulerAngles","y","RAD","_vector","normalize","node","touchAngleCallBack","_vectorAngle","fix_update","dt","lengthSqr","setPosition","position","add3f","x","update","deltaTime","_now_time"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;;;;;;;AACpCC,MAAAA,O,GAAsBL,U,CAAtBK,O;AAASC,MAAAA,Q,GAAaN,U,CAAbM,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACMC,MAAAA,S,GAAY,K;AACZC,MAAAA,K,GAAQ,C;;wBAGDC,M,WADZJ,OAAO,CAAC,QAAD,C,UAIHC,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAEP;AAAR,OAAD,C;;;;;;;;;;;;;;oEAEeD,IAAI,CAACS,I;;yEACAT,IAAI,CAACS,I;;sEACd,C;;;;;;;eAEpBC,a,GAAA,uBAAcC,MAAd,EAA4BC,KAA5B,EAA2C;AACvCZ,UAAAA,IAAI,CAACa,OAAL,CAAaF,MAAb,EAAqBA,MAArB,EAA6BX,IAAI,CAACS,IAAlC,EAAwC,KAAKK,YAAL,CAAkBC,WAAlB,CAA8BC,CAA9B,GAAkCd,KAAK,CAACe,GAAhF;AACA,eAAKC,OAAL,GAAeP,MAAM,CAACQ,SAAP,EAAf;;AACA,cAAIP,KAAJ,EAAW;AACP,iBAAKQ,IAAL,CAAUL,WAAV,GAAwB,IAAIf,IAAJ,CAAS,CAAT,EAAYY,KAAK,GAAG,EAAR,GAAa,KAAKE,YAAL,CAAkBC,WAAlB,CAA8BC,CAAvD,EAA0D,CAA1D,CAAxB;AACH;AACJ,S;;eAEDK,kB,GAAA,4BAAmBV,MAAnB,EAAiCC,KAAjC,EAAgD;AAC5C,eAAKU,YAAL,GAAoBX,MAAM,CAACQ,SAAP,EAApB;AACH,S;;eAEDI,U,GAAA,oBAAWC,EAAX,EAAuB;AACnB,cAAI,KAAKN,OAAL,CAAaO,SAAb,KAA2B,CAA/B,EAAkC;AAC9B,iBAAKL,IAAL,CAAUM,WAAV,CAAsB,KAAKN,IAAL,CAAUO,QAAV,CAAmBC,KAAnB,CAAyB,KAAKV,OAAL,CAAaW,CAAb,GAAiBvB,KAAjB,GAAyBkB,EAAlD,EAAsD,CAAtD,EAAyD,CAAC,KAAKN,OAAL,CAAaF,CAAd,GAAkBV,KAAlB,GAA0BkB,EAAnF,CAAtB,EAD8B,CAE9B;AACH,WAHD,MAGO,CACH;AACH;;AAED,cAAI,KAAKF,YAAL,CAAkBG,SAAlB,KAAgC,CAApC,EAAuC;AACnC,iBAAKX,YAAL,CAAkBC,WAAlB,GAAgC,KAAKD,YAAL,CAAkBC,WAAlB,CAA8Ba,KAA9B,CAAoC,CAApC,EAAuC,CAAC,KAAKN,YAAL,CAAkBO,CAA1D,EAA6D,CAA7D,CAAhC;AACH;AACJ,S;;eAEDC,M,GAAA,gBAAOC,SAAP,EAA0B;AACtB,eAAKC,SAAL,IAAkBD,SAAlB;;AACA,iBAAO,KAAKC,SAAL,IAAkB3B,SAAzB,EAAoC;AAChC,iBAAKkB,UAAL,CAAgBlB,SAAhB;AACA,iBAAK2B,SAAL,IAAkB3B,SAAlB;AACH;AACJ,S;;;QAxCuBN,S;;;;;iBAIH,I","sourcesContent":["\nimport { _decorator, Component, Vec3, Node, macro } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = Player\n * DateTime = Fri Sep 24 2021 14:15:01 GMT+0530 (India Standard Time)\n * Author = shashankA\n * FileBasename = Player.ts\n * FileBasenameNoExtension = Player\n * URL = db://assets/Script/Player.ts\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\n *\n */\nconst CELL_TIME = 0.016;\nconst SPEED = 2;\n\n@ccclass('Player')\nexport class Player extends Component {\n\n\n    @property({ type: Node })\n    playerCamera: Node = null;\n    private _vector: Vec3 = Vec3.ZERO;\n    private _vectorAngle: Vec3 = Vec3.ZERO;\n    private _now_time = 0;\n\n    touchCallBack(vector: Vec3, angle: number) {\n        Vec3.rotateZ(vector, vector, Vec3.ZERO, this.playerCamera.eulerAngles.y * macro.RAD);\n        this._vector = vector.normalize();\n        if (angle) {\n            this.node.eulerAngles = new Vec3(0, angle + 90 + this.playerCamera.eulerAngles.y, 0);\n        }\n    }\n\n    touchAngleCallBack(vector: Vec3, angle: number) {\n        this._vectorAngle = vector.normalize();\n    }\n\n    fix_update(dt: number) {\n        if (this._vector.lengthSqr() > 0) {\n            this.node.setPosition(this.node.position.add3f(this._vector.x * SPEED * dt, 0, -this._vector.y * SPEED * dt));\n            // this._skeletal.resume();\n        } else {\n            // this._skeletal.pause();\n        }\n\n        if (this._vectorAngle.lengthSqr() > 0) {\n            this.playerCamera.eulerAngles = this.playerCamera.eulerAngles.add3f(0, -this._vectorAngle.x, 0);\n        }\n    }\n\n    update(deltaTime: number) {\n        this._now_time += deltaTime;\n        while (this._now_time >= CELL_TIME) {\n            this.fix_update(CELL_TIME);\n            this._now_time -= CELL_TIME;\n        }\n    }\n}"]}