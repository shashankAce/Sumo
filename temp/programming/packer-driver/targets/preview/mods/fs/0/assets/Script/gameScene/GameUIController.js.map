{"version":3,"sources":["file:///D:/Office/Sumo/assets/Script/gameScene/GameUIController.ts"],"names":["_decorator","Component","Node","macro","Vec3","EventHandler","ccclass","property","GameUIController","type","tooltip","start","node","on","EventType","TOUCH_MOVE","touchMove","TOUCH_START","touchStart","TOUCH_END","touchEnded","touch","loc","getLocation","pos","x","startLoc","y","angle","get_angle","touchEventCallBack","forEach","c","emit","cx","cy","ex","ey","dy","dx","theta","Math","atan2","DEG"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAwBC,MAAAA,K,OAAAA,K;AAAoBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Y,OAAAA,Y;;;;;;;AAC1EC,MAAAA,O,GAAsBN,U,CAAtBM,O;AAASC,MAAAA,Q,GAAaP,U,CAAbO,Q;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;kCAGaC,gB,WADZF,OAAO,CAAC,kBAAD,C,UAKHC,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAE,CAACJ,YAAD,CADA;AAENK,QAAAA,OAAO,EAAE;AAFH,OAAD,C;;;;;;;;;;;;;;;;;;;;;eAMTC,K,GAAA,iBAAQ;AACJ,eAAKC,IAAL,CAAUC,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeC,UAA5B,EAAwC,KAAKC,SAA7C,EAAwD,IAAxD;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeG,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeK,SAA5B,EAAuC,KAAKC,UAA5C,EAAwD,IAAxD;AACH,S;;eAEDJ,S,GAAA,mBAAUK,KAAV,EAA6B;AACzB;AACR;AACA;AACA;AACA;AACA;AACA;AAGQ,cAAIC,GAAG,GAAGD,KAAK,CAACE,WAAN,EAAV;AACA,cAAIC,GAAG,GAAG,IAAIpB,IAAJ,CAASkB,GAAG,CAACG,CAAJ,GAAQ,KAAKC,QAAL,CAAcD,CAA/B,EAAkCH,GAAG,CAACK,CAAJ,GAAQ,KAAKD,QAAL,CAAcC,CAAxD,CAAV;AACA,cAAIC,KAAK,GAAG,KAAKC,SAAL,CAAe,KAAKH,QAAL,CAAcD,CAA7B,EAAgC,KAAKC,QAAL,CAAcC,CAA9C,EAAiDL,GAAG,CAACG,CAArD,EAAwDH,GAAG,CAACK,CAA5D,CAAZ;AACA,eAAKG,kBAAL,CAAwBC,OAAxB,CAAgC,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACC,IAAF,CAAO,CAACT,GAAD,EAAMI,KAAN,CAAP,CAAJ;AAAA,WAAjC;AACH,S;;eAEDR,U,GAAA,oBAAWC,KAAX,EAA8B;AAC1B,eAAKS,kBAAL,CAAwBC,OAAxB,CAAgC,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACC,IAAF,CAAO,CAAC,IAAI7B,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAD,CAAP,CAAJ;AAAA,WAAjC;AACH,S;;eAEDc,U,GAAA,oBAAWG,KAAX,EAA8B;AAC1B,eAAKK,QAAL,GAAgBL,KAAK,CAACE,WAAN,EAAhB;AACA,eAAKP,SAAL,CAAeK,KAAf;AACH,S;;eAEDQ,S,GAAA,mBAAUK,EAAV,EAAsBC,EAAtB,EAAkCC,EAAlC,EAA8CC,EAA9C,EAA0D;AACtD,cAAIC,EAAE,GAAGD,EAAE,GAAGF,EAAd;AACA,cAAII,EAAE,GAAGH,EAAE,GAAGF,EAAd;AACA,cAAIM,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWJ,EAAX,EAAeC,EAAf,CAAZ,CAHsD,CAItD;;AACA,iBAAOC,KAAK,GAAGrC,KAAK,CAACwC,GAArB;AACH,S;;;QA/CiC1C,S;;;;;iBAQG,E","sourcesContent":["\r\nimport { _decorator, Component, Node, Vec2, EventTouch, macro, UITransform, Vec3, EventHandler } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = GameUIController\r\n * DateTime = Tue Sep 28 2021 19:04:24 GMT+0530 (India Standard Time)\r\n * Author = shashankA\r\n * FileBasename = GameUIController.ts\r\n * FileBasenameNoExtension = GameUIController\r\n * URL = db://assets/Script/GameUIController.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('GameUIController')\r\nexport class GameUIController extends Component {\r\n\r\n    startLoc: Vec2;\r\n\r\n    @property({\r\n        type: [EventHandler],\r\n        tooltip: 'Touch Drag'\r\n    })\r\n    touchEventCallBack: EventHandler[] = [];\r\n\r\n    start() {\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n        this.node.on(Node.EventType.TOUCH_END, this.touchEnded, this);\r\n    }\r\n\r\n    touchMove(touch: EventTouch) {\r\n        /*  \r\n        ***** Do not delete this commented code\r\n\r\n        let loc = touch.getUILocation();\r\n        let pos = this.node.getComponent(UITransform).convertToNodeSpaceAR(new Vec3(loc.x, loc.y));\r\n        let angle = Math.atan2(pos.y, pos.x);\r\n        this.touchEventCallBack.forEach(c => c.emit([pos, angle * macro.DEG])); \r\n        */\r\n\r\n        let loc = touch.getLocation();\r\n        let pos = new Vec3(loc.x - this.startLoc.x, loc.y - this.startLoc.y);\r\n        let angle = this.get_angle(this.startLoc.x, this.startLoc.y, loc.x, loc.y);\r\n        this.touchEventCallBack.forEach(c => c.emit([pos, angle]));\r\n    }\r\n\r\n    touchEnded(touch: EventTouch) {\r\n        this.touchEventCallBack.forEach(c => c.emit([new Vec3(0, 0, 0)]));\r\n    }\r\n\r\n    touchStart(touch: EventTouch) {\r\n        this.startLoc = touch.getLocation();\r\n        this.touchMove(touch);\r\n    }\r\n\r\n    get_angle(cx: number, cy: number, ex: number, ey: number) {\r\n        let dy = ey - cy;\r\n        let dx = ex - cx;\r\n        let theta = Math.atan2(dy, dx);\r\n        // theta *= 180 / Math.PI;\r\n        return theta * macro.DEG;\r\n    }\r\n\r\n}"]}