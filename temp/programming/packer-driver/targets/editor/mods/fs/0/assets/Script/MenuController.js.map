{"version":3,"sources":["file:///C:/Users/shash/NewProject/assets/Script/MenuController.ts"],"names":["_decorator","Component","systemEvent","SystemEvent","director","macro","Node","Quat","clamp","log","ccclass","property","MenuController","type","onLoad","ENABLE_MULTI_TOUCH","preloadScene","start","on","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","touch","startLoc","getLocation","loc","getLocationX","dist","x","angle","sumo","rotation","fromEuler","z","startGame","loadScene","onDestroy","off"],"mappings":";;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,W,OAAAA,W;AAAgCC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,K,OAAAA,K;AAAaC,MAAAA,I,OAAAA,I;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAeC,MAAAA,G,OAAAA,G;;;;;;;OAE/H;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;gCAGjBY,c,WADZF,OAAO,CAAC,gBAAD,C,UAMHC,QAAQ,CAAC;AACNE,QAAAA,IAAI,EAAEP;AADA,OAAD,C,oCANb,MACaM,cADb,SACoCX,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAU1Ca,QAAAA,MAAM,GAAG;AAELT,UAAAA,KAAK,CAACU,kBAAN,GAA2B,KAA3B;AACAX,UAAAA,QAAQ,CAACY,YAAT,CAAsB,WAAtB;AACH;;AAEDC,QAAAA,KAAK,GAAG;AACJ;AACAf,UAAAA,WAAW,CAACgB,EAAZ,CAAef,WAAW,CAACgB,SAAZ,CAAsBC,WAArC,EAAkD,KAAKC,UAAvD,EAAmE,IAAnE;AACAnB,UAAAA,WAAW,CAACgB,EAAZ,CAAef,WAAW,CAACgB,SAAZ,CAAsBG,UAArC,EAAiD,KAAKC,SAAtD,EAAiE,IAAjE;AACH;;AAEDF,QAAAA,UAAU,CAACG,KAAD,EAAe;AACrB,eAAKC,QAAL,GAAgBD,KAAK,CAACE,WAAN,EAAhB;AACH;;AAEDH,QAAAA,SAAS,CAACC,KAAD,EAAe;AACpB,cAAIG,GAAG,GAAGH,KAAK,CAACI,YAAN,EAAV;AACA,cAAIC,IAAI,GAAG,KAAKJ,QAAL,CAAcK,CAAd,GAAkBH,GAA7B;AACA,cAAII,KAAK,GAAGvB,KAAK,CAACqB,IAAD,EAAO,CAAC,GAAR,EAAa,GAAb,CAAjB;AACApB,UAAAA,GAAG,CAACsB,KAAD,CAAH;AACA,eAAKC,IAAL,CAAUC,QAAV,GAAqB1B,IAAI,CAAC2B,SAAL,CAAe,IAAI3B,IAAJ,EAAf,EAA2B,CAAC,EAA5B,EAAgC,CAAhC,EAAmC,KAAKyB,IAAL,CAAUC,QAAV,CAAmBE,CAAnB,GAAuBJ,KAA1D,CAArB,CALoB,CAMpB;AACH;;AAEDK,QAAAA,SAAS,GAAS;AACdhC,UAAAA,QAAQ,CAACiC,SAAT,CAAmB,WAAnB;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACRpC,UAAAA,WAAW,CAACqC,GAAZ,CAAgBpC,WAAW,CAACgB,SAAZ,CAAsBC,WAAtC,EAAmD,KAAKC,UAAxD,EAAoE,IAApE;AACAnB,UAAAA,WAAW,CAACqC,GAAZ,CAAgBpC,WAAW,CAACgB,SAAZ,CAAsBG,UAAtC,EAAkD,KAAKC,SAAvD,EAAkE,IAAlE;AACH;;AA1CyC,O","sourcesContent":["\nimport { _decorator, Component, systemEvent, SystemEvent, EventTouch, Touch, director, macro, Vec2, Node, Vec3, Quat, clamp, Prefab, log } from 'cc';\nimport { Sumo } from './Sumo';\nconst { ccclass, property } = _decorator;\n\n@ccclass('MenuController')\nexport class MenuController extends Component {\n\n    startLoc: Vec2;\n    endLoc: Vec2;\n\n    @property({\n        type: Node\n    })\n    sumo: Node;\n\n    onLoad() {\n\n        macro.ENABLE_MULTI_TOUCH = false;\n        director.preloadScene('GameScene');\n    }\n\n    start() {\n        // Created for rotating the character\n        systemEvent.on(SystemEvent.EventType.TOUCH_START, this.touchStart, this);\n        systemEvent.on(SystemEvent.EventType.TOUCH_MOVE, this.touchMove, this);\n    }\n\n    touchStart(touch: Touch) {\n        this.startLoc = touch.getLocation();\n    }\n\n    touchMove(touch: Touch) {\n        let loc = touch.getLocationX();\n        let dist = this.startLoc.x - loc;\n        let angle = clamp(dist, -360, 360);\n        log(angle);\n        this.sumo.rotation = Quat.fromEuler(new Quat(), -90, 0, this.sumo.rotation.z + angle);\n        // this.sumo.rotation = Quat.rotateZ(new Quat(), this.node.rotation, this.currAngle * Math.PI / 180)\n    }\n\n    startGame(): void {\n        director.loadScene('GameScene');\n    }\n\n    onDestroy() {\n        systemEvent.off(SystemEvent.EventType.TOUCH_START, this.touchStart, this);\n        systemEvent.off(SystemEvent.EventType.TOUCH_MOVE, this.touchMove, this);\n    }\n}"]}